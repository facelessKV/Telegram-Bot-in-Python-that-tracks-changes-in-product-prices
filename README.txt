# Инструкция по установке и запуску бота для отслеживания цен

Этот бот позволяет отслеживать цены на товары в интернет-магазинах и уведомлять вас об их изменении.

## Содержание
1. [Установка для Windows](#установка-для-windows)
2. [Установка для Linux](#установка-для-linux)
3. [Получение токена Telegram-бота](#получение-токена-telegram-бота)
4. [Настройка и запуск бота](#настройка-и-запуск-бота)
5. [Использование бота](#использование-бота)

## Установка для Windows

### Шаг 1: Установка Python 3.9
Python 3.9 - стабильная версия, которая отлично работает с нашим ботом.

1. Скачайте установщик Python 3.9 с официального сайта: https://www.python.org/downloads/release/python-3913/
   - Прокрутите страницу вниз и выберите "Windows installer (64-bit)"

2. Запустите скачанный файл и следуйте инструкциям установщика:
   - ✅ Отметьте галочку "Add Python 3.9 to PATH" (это важно!)
   - Нажмите "Install Now"

3. Проверьте установку:
   - Откройте Командную строку (нажмите Win+R, введите cmd и нажмите Enter)
   - Введите команду: `python --version`
   - Должна отобразиться версия Python, например "Python 3.9.13"

### Шаг 2: Установка необходимых библиотек

1. Откройте Командную строку (нажмите Win+R, введите cmd и нажмите Enter)

2. Введите следующие команды поочередно (нажимайте Enter после каждой):
   ```
   pip install python-telegram-bot==20.6
   pip install requests
   pip install beautifulsoup4
   ```

### Шаг 3: Скачивание файла бота

1. Создайте новую папку для бота (например, C:\price-tracker-bot)

2. Сохраните код бота из предыдущих сообщений в файл `price_tracker_bot.py` в созданной папке.

## Установка для Linux

### Шаг 1: Установка Python 3.9

1. Откройте Терминал (обычно Ctrl+Alt+T)

2. Обновите список пакетов:
   ```
   sudo apt update
   ```

3. Установите необходимые инструменты для сборки Python:
   ```
   sudo apt install software-properties-common build-essential
   ```

4. Добавьте репозиторий с Python 3.9:
   ```
   sudo add-apt-repository ppa:deadsnakes/ppa
   ```

5. Обновите список пакетов снова:
   ```
   sudo apt update
   ```

6. Установите Python 3.9:
   ```
   sudo apt install python3.9 python3.9-venv python3.9-dev python3-pip
   ```

7. Проверьте установку:
   ```
   python3.9 --version
   ```

### Шаг 2: Установка необходимых библиотек

Введите следующие команды поочередно:
```
pip3 install python-telegram-bot==20.6
pip3 install requests
pip3 install beautifulsoup4
```

### Шаг 3: Скачивание файла бота

1. Создайте новую папку для бота:
   ```
   mkdir ~/price-tracker-bot
   cd ~/price-tracker-bot
   ```

2. Сохраните код бота из предыдущих сообщений в файл `price_tracker_bot.py` в созданной папке.

## Получение токена Telegram-бота

Для работы бота нужен специальный токен, который можно получить у @BotFather в Telegram:

1. Откройте Telegram и найдите бота @BotFather (официальный бот Telegram для создания ботов)

2. Напишите боту команду: `/newbot`

3. BotFather попросит вас выбрать имя для бота - это имя будет отображаться пользователям. Например, "Мой трекер цен"

4. Затем нужно ввести username для бота - он должен заканчиваться на "bot". Например, "my_price_tracker_bot"

5. Если имя свободно, BotFather выдаст вам токен - длинную строку символов вида:
   ```
   1234567890:ABCdefGhIJKlmNoPQRsTUVwxyZ
   ```

6. Сохраните этот токен - он понадобится для настройки бота.

## Настройка и запуск бота

### Шаг 1: Вставьте токен в код бота

1. Откройте файл `price_tracker_bot.py` в любом текстовом редакторе (например, Блокнот в Windows или nano в Linux)

2. Найдите строку:
   ```python
   application = Application.builder().token("YOUR_TELEGRAM_BOT_TOKEN").build()
   ```

3. Замените `YOUR_TELEGRAM_BOT_TOKEN` на полученный от BotFather токен (вместе с кавычками), например:
   ```python
   application = Application.builder().token("1234567890:ABCdefGhIJKlmNoPQRsTUVwxyZ").build()
   ```

4. Сохраните файл

### Шаг 2: Запуск бота

#### В Windows:
1. Откройте Командную строку (Win+R, введите cmd, нажмите Enter)
2. Перейдите в папку с ботом (например, `cd C:\price-tracker-bot`)
3. Запустите бота командой:
   ```
   python price_tracker_bot.py
   ```

#### В Linux:
1. Откройте Терминал (Ctrl+Alt+T)
2. Перейдите в папку с ботом:
   ```
   cd ~/price-tracker-bot
   ```
3. Запустите бота командой:
   ```
   python3.9 price_tracker_bot.py
   ```

### Шаг 3: Проверка работы бота

1. Откройте Telegram на телефоне или компьютере
2. Найдите бота по имени, которое вы задали при создании
3. Напишите боту команду `/start`
4. Бот должен ответить приветственным сообщением

## Использование бота

После запуска бота, вы можете использовать следующие команды:

- `/start` - Показать приветствие и список команд
- `/add` - Добавить ссылку на товар для отслеживания
- `/list` - Показать список всех отслеживаемых товаров
- `/remove` - Удалить товар из отслеживания

### Как добавить товар для отслеживания:

1. Отправьте команду `/add`
2. Бот попросит отправить ссылку на товар
3. Скопируйте ссылку на товар с сайта интернет-магазина и отправьте боту
4. Бот подтвердит добавление товара и покажет текущую цену

### Как это работает:

- Бот будет проверять цены всех добавленных товаров каждый день в 9:00 утра
- Если цена изменится, бот отправит вам уведомление
- В уведомлении будет показана старая цена, новая цена и процент изменения

### Как запускать бота постоянно (чтобы он работал 24/7):

#### Windows:
1. Создайте файл `start_bot.bat` в той же папке со следующим содержимым:
   ```
   @echo off
   echo Запуск бота отслеживания цен...
   python price_tracker_bot.py
   pause
   ```
2. Запускайте этот файл вместо команды в командной строке

#### Linux:
Для автоматического запуска бота при загрузке системы выполните:
1. Создайте сервисный файл:
   ```
   sudo nano /etc/systemd/system/price-tracker-bot.service
   ```
2. Добавьте в него следующее содержимое (замените путь на ваш):
   ```
   [Unit]
   Description=Price Tracker Telegram Bot
   After=network.target

   [Service]
   User=YOUR_USERNAME
   WorkingDirectory=/home/YOUR_USERNAME/price-tracker-bot
   ExecStart=/usr/bin/python3.9 /home/YOUR_USERNAME/price-tracker-bot/price_tracker_bot.py
   Restart=always

   [Install]
   WantedBy=multi-user.target
   ```
3. Замените YOUR_USERNAME на имя вашего пользователя
4. Сохраните файл (Ctrl+O, затем Enter) и выйдите (Ctrl+X)
5. Выполните:
   ```
   sudo systemctl enable price-tracker-bot.service
   sudo systemctl start price-tracker-bot.service
   ```

## Решение проблем

### Если бот не запускается:

1. **Проверьте, правильно ли установлен Python**
   - В Windows: введите `python --version` в командной строке
   - В Linux: введите `python3.9 --version` в терминале

2. **Проверьте, правильно ли установлены библиотеки**
   - В Windows: `pip list | findstr telegram`
   - В Linux: `pip3 list | grep telegram`

3. **Проверьте правильность токена**
   - Убедитесь, что токен вставлен правильно, без лишних пробелов

4. **Проверьте доступ в интернет**
   - Бот требует постоянного подключения к интернету

Если бот не может определить цену на каком-то сайте, возможно, структура сайта не поддерживается. В этом случае попробуйте другой магазин.